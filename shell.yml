---
- hosts: "{{ target }}"
  become: yes

  vars:
    script_name:
    script_args: 
    script_get_url:
    exec_user: root

  tasks:
    - name: Touch A Temp File
      command: mktemp -u
      register: temp_file

    - name: Download Script File
      get_url:
        url: "{{ script_get_url }}"
        dest: "{{ temp_file.stdout }}"
        mode: 0500
        owner: "{{ exec_user }}"

    - name: Exec Script On Remote Host
      shell: "{{ temp_file.stdout }} {{ script_args }}"
      args:
        chdir: /tmp
      become_user: "{{ exec_user }}"

    - name: Remove temp Script File
      file: 
        dest: "{{ temp_file.stdout }}"
        state: absent
